<!DOCTYPE html>
<html>
<head>
<style>


</style>
</head>
<body> 

<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<script src="https://threejs.org/build/three.min.js"></script>
<script src="https://threejs.org/examples/js/controls/OrbitControls.js"></script>

<script>


var renderer, camera, scene, axes, truck;

init();
animate();

function init(){
	renderer = new THREE.WebGLRenderer({antialias: true});
	renderer.setSize (window.innerWidth, window.innerHeight);
	renderer.setClearColor (0x888888);
	document.body.appendChild (renderer.domElement);
	
	camera = new THREE.PerspectiveCamera(50, window.innerWidth/window.innerHeight, 1, 1000);
	camera.position.z = 50;
	
	var controls = new THREE.OrbitControls (camera, renderer.domElement);
	
	scene = new THREE.Scene();
	var grid = new THREE.GridHelper (100, 10, 'red', 'white');
	scene.add(grid);
	
	var light = new THREE.PointLight( 0xffffff, 1, 1000 );
	light.position.set( 0, 20, 0 );
	scene.add( light );
	
	initObject();
}

function initObject(){
	var shape = new THREE.Shape();
	shape.moveTo( 0,0 );
	shape.lineTo( 0, 8 );
	shape.lineTo( 10, 8 );
	shape.lineTo( 10, 5 );
	shape.lineTo( 14, 5 );
	shape.lineTo( 15, 3 );
	shape.lineTo( 15, 0 );
	shape.lineTo( 0, 0 );

	var extrudeSettings = {
		steps: 1,
		depth: 5,
		bevelEnabled: true,
		bevelThickness: 1,
		bevelSize: 1,
		bevelOffset: 0,
		bevelSegments: 1
	};
	var geometry = new THREE.ExtrudeGeometry( shape, extrudeSettings );
	var material1 = new THREE.MeshLambertMaterial({color : 0x2580c4});
	var box = new THREE.Mesh(geometry, material1);
	box.position.set(0, 2.5, 0);
	
	
	var geometry = new THREE.CylinderGeometry(1.5, 1.5, 5, 64);
	var material2 = new THREE.MeshBasicMaterial({color : 0x000000});
	var wheel1 = new THREE.Mesh(geometry, material2);
	wheel1.rotation.x = Math.PI/2;
	wheel1.position.set(3, 1.5, 2.5);
	
	var wheel2 = wheel1.clone();
	wheel2.position.set(12, 1.5, 2.5);
	
	
	truck = new THREE.Object3D();
	truck.add(box, wheel1, wheel2);
	scene.add(truck);
	truck.position.set (-50, 0, -50);
}

var angle = 0;
var status = 0;
function animate(){
	if (status == 0) {
		angle = 0;
		truck.position.set (truck.position.x + 1, 0, truck.position.z);
		if (truck.position.x > 50) {
			status = 1;
		}
		truck.rotation.y = angle;
	}
	else if (status == 1) {
		angle = Math.PI*1.5;
		truck.position.set (truck.position.x, 0, truck.position.z + 1);
		if (truck.position.z > 50) {
			status = 2;
		}
		truck.rotation.y = angle;
	}
	else if (status == 2) {
		angle = Math.PI;
		truck.position.set (truck.position.x -1, 0, truck.position.z);
		if (truck.position.x < -50) {
			status = 3;
		}
		truck.rotation.y = angle;
	}
	else if (status == 3) {
		angle = Math.PI/2;
		truck.position.set (truck.position.x, 0, truck.position.z - 1);
		if (truck.position.z < -50) {
			status = 0;
		}
		truck.rotation.y = angle;
	}
	
	renderer.render (scene, camera);
	requestAnimationFrame( animate );
}

</script>

</body>
</html>